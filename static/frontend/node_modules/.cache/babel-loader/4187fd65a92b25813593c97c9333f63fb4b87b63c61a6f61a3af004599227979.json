{"ast":null,"code":"import _toConsumableArray from\"C:/Users/seanh/OneDrive/Aether/static/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/seanh/OneDrive/Aether/static/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{io}from\"socket.io-client\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Chat=function Chat(friendId){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),chat=_useState4[0],setChat=_useState4[1];var socket=io(\"http://localhost:8000\");useEffect(function(){fetch(\"/get_chat_messages/\".concat(friendId)).then(function(response){return response.json();}).then(function(data){console.log('Chat messages data:',data);setChat(data);}).catch(function(error){return console.log(\"Error fetching chat messages\",error);});socket.on('receive_message',function(message){setChat(function(prevChat){return[].concat(_toConsumableArray(prevChat),[message]);});});return function(){socket.disconnect();};},[friendId]);var sendMessage=function sendMessage(){var messageData={content:message,receiver_id:friendId};socket.emit('send_message',messageData);setMessage('');};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:friendName}),/*#__PURE__*/_jsx(\"div\",{className:\"chatBox\",children:chat.map(function(message,index){return/*#__PURE__*/_jsx(\"div\",{children:message.content},index);})}),/*#__PURE__*/_jsx(\"input\",{value:message,onChange:function onChange(e){return setMessage(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,children:\"Send\"})]});};export default Chat;","map":{"version":3,"names":["React","useState","useEffect","io","jsx","_jsx","jsxs","_jsxs","Chat","friendId","_useState","_useState2","_slicedToArray","message","setMessage","_useState3","_useState4","chat","setChat","socket","fetch","concat","then","response","json","data","console","log","catch","error","on","prevChat","_toConsumableArray","disconnect","sendMessage","messageData","content","receiver_id","emit","children","friendName","className","map","index","value","onChange","e","target","onClick"],"sources":["C:/Users/seanh/OneDrive/Aether/static/frontend/src/components/directMessages.js"],"sourcesContent":["import React, {useState, useEffect } from 'react';\r\nimport { io } from \"socket.io-client\";\r\n\r\nconst Chat = ( friendId ) => {\r\n    const [message, setMessage] = useState('');\r\n    const [chat, setChat] = useState([]);\r\n    const socket = io(\"http://localhost:8000\");\r\n\r\n    useEffect(() => {\r\n        fetch(`/get_chat_messages/${friendId}`)\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            console.log('Chat messages data:', data);\r\n            setChat(data)\r\n        })\r\n        .catch(error => console.log(\"Error fetching chat messages\", error));\r\n        \r\n        socket.on('receive_message', (message) => {\r\n            setChat((prevChat) => [...prevChat, message]);\r\n        });\r\n        return () => {\r\n            socket.disconnect();\r\n        };\r\n    }, [friendId]);\r\n\r\n    const sendMessage = () => {\r\n        const messageData = {\r\n            content: message,\r\n            receiver_id: friendId\r\n        };\r\n        socket.emit('send_message', messageData);\r\n        setMessage('');\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h3>{friendName}</h3>\r\n            <div className=\"chatBox\">\r\n                {chat.map((message, index) => (\r\n                    <div key={index}>{message.content}</div>\r\n                ))}\r\n            </div>\r\n            <input value={message} onChange={(e) => setMessage(e.target.value)}/>\r\n            <button onClick={sendMessage}>Send</button>\r\n        </div>\r\n    );\r\n};\r\nexport default Chat;"],"mappings":"gRAAA,MAAO,CAAAA,KAAK,EAAGC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CACjD,OAASC,EAAE,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEtC,GAAM,CAAAC,IAAI,CAAG,QAAP,CAAAA,IAAIA,CAAKC,QAAQ,CAAM,CACzB,IAAAC,SAAA,CAA8BT,QAAQ,CAAC,EAAE,CAAC,CAAAU,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAnCG,OAAO,CAAAF,UAAA,IAAEG,UAAU,CAAAH,UAAA,IAC1B,IAAAI,UAAA,CAAwBd,QAAQ,CAAC,EAAE,CAAC,CAAAe,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA7BE,IAAI,CAAAD,UAAA,IAAEE,OAAO,CAAAF,UAAA,IACpB,GAAM,CAAAG,MAAM,CAAGhB,EAAE,CAAC,uBAAuB,CAAC,CAE1CD,SAAS,CAAC,UAAM,CACZkB,KAAK,uBAAAC,MAAA,CAAuBZ,QAAQ,CAAE,CAAC,CACtCa,IAAI,CAAC,SAAAC,QAAQ,QAAI,CAAAA,QAAQ,CAACC,IAAI,CAAC,CAAC,GAAC,CACjCF,IAAI,CAAC,SAAAG,IAAI,CAAI,CACVC,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAEF,IAAI,CAAC,CACxCP,OAAO,CAACO,IAAI,CAAC,CACjB,CAAC,CAAC,CACDG,KAAK,CAAC,SAAAC,KAAK,QAAI,CAAAH,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAEE,KAAK,CAAC,GAAC,CAEnEV,MAAM,CAACW,EAAE,CAAC,iBAAiB,CAAE,SAACjB,OAAO,CAAK,CACtCK,OAAO,CAAC,SAACa,QAAQ,WAAAV,MAAA,CAAAW,kBAAA,CAASD,QAAQ,GAAElB,OAAO,IAAC,CAAC,CACjD,CAAC,CAAC,CACF,MAAO,WAAM,CACTM,MAAM,CAACc,UAAU,CAAC,CAAC,CACvB,CAAC,CACL,CAAC,CAAE,CAACxB,QAAQ,CAAC,CAAC,CAEd,GAAM,CAAAyB,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAA,CAAS,CACtB,GAAM,CAAAC,WAAW,CAAG,CAChBC,OAAO,CAAEvB,OAAO,CAChBwB,WAAW,CAAE5B,QACjB,CAAC,CACDU,MAAM,CAACmB,IAAI,CAAC,cAAc,CAAEH,WAAW,CAAC,CACxCrB,UAAU,CAAC,EAAE,CAAC,CAClB,CAAC,CAED,mBACIP,KAAA,QAAAgC,QAAA,eACIlC,IAAA,OAAAkC,QAAA,CAAKC,UAAU,CAAK,CAAC,cACrBnC,IAAA,QAAKoC,SAAS,CAAC,SAAS,CAAAF,QAAA,CACnBtB,IAAI,CAACyB,GAAG,CAAC,SAAC7B,OAAO,CAAE8B,KAAK,qBACrBtC,IAAA,QAAAkC,QAAA,CAAkB1B,OAAO,CAACuB,OAAO,EAAvBO,KAA6B,CAAC,EAC3C,CAAC,CACD,CAAC,cACNtC,IAAA,UAAOuC,KAAK,CAAE/B,OAAQ,CAACgC,QAAQ,CAAE,SAAAA,SAACC,CAAC,QAAK,CAAAhC,UAAU,CAACgC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,EAAC,CAAC,CAAC,cACrEvC,IAAA,WAAQ2C,OAAO,CAAEd,WAAY,CAAAK,QAAA,CAAC,MAAI,CAAQ,CAAC,EAC1C,CAAC,CAEd,CAAC,CACD,cAAe,CAAA/B,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}